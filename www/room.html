<div id="room_page" data-role="page" data-title="Leerer Raum" data-theme="a" data-content-theme="a">
	<div id="roomContent" data-role="content" class="toblur">
		<p>
			<h3>Leere Seminarr√§ume, aufbauend auf ihrer aktuellen Position, sind:<br></h3>
			<ul id="#roomList" data-role="listview">
			    <li><a href="#">Li015</a></li>
			    <li><a href="#">Li203</a></li>
			    <li><a href="#">Li404</a></li>
			    <li><a href="#">Li405</a></li>
			</ul>
			<br>
			<iframe src="https://maps.google.de/maps?hl=de&q=51.313209,12.373687&ie=UTF8&z=16&output=embed" width="90%" height="300" name="GoogleMaps"></iframe>
		</p>
	</div>
	<script>
		$( "#room_page" )
			.on("pagecreate", function(){})
			.on("pageshow", function () {
				$("#btn_refresh").hide();
				GLOBAL.INIT.room = true;
				$.mobile.loading( "show", {
				  text: "Ihre aktuelle Position wird bestimmt. Bitte haben Sie einen Moment Geduld!",
				  textVisible: true,
				  theme: "b"
				});
			 })
			.on("pagehide", function() {
				$("#btn_refresh").show();
			 });

		function getLocation() {
			navigator.geolocation.getCurrentPosition(locationFound, locationError, { maximumAge: 7000, timeout: 30000, enableHighAccuracy: true });
		}

		function locationFound(position){
			if(position.coords.accuracy > 10) {
				getLocation();
			}else{
				 alert('Latitude: '          + position.coords.latitude          + '\n' +
				  'Longitude: '         + position.coords.longitude         + '\n' +
				  'Altitude: '          + position.coords.altitude          + '\n' +
				  'Accuracy: '          + position.coords.accuracy          + '\n' +
				  'Altitude Accuracy: ' + position.coords.altitudeAccuracy  + '\n' +
				  'Heading: '           + position.coords.heading           + '\n' +
				  'Speed: '             + position.coords.speed             + '\n' +
				  'Timestamp: '         + position.timestamp                + '\n');
				loadingOut();
				$("#roomContent").append('<p><iframe src="http://maps.google.de/maps?hl=de&q='+position.coords.latitude+'.'+ position.coords.longitude+'&ie=UTF8&z=16&output=embed" width="90%" height="300" name="GoogleMaps"></iframe></p>');
			}
		}

		function locationError(error){
			 console.log('code: '    + error.code    + '\n' +
          		'message: ' + error.message + '\n');
			loadingOut();
		}
	</script>
</div>
