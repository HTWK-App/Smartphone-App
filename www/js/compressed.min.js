function buildingLoadBuildingDetails(e){if(WURFL.is_mobile){analytics.trackView("building#"+e)}loadingIn();$.getJSON(CONFIG.SERVER.base+CONFIG.SERVER.builds+"/"+e).done(function(t,n,r){if(!isEmpty(t.exception)){ajaxErrorHandler(t,n,r);return}var i="";for(var s in t.description){if(!isEmpty(t.description[s]))i+=t.description[s]+"</br>"}var o='<div id="building_'+e+'" data-role="page" data-theme="b" data-subpage="true" data-title="Gebäude" data-destination="'+t.latLng.replace(/ /,"")+'">'+'	<div data-role="header" data-position="fixed" data-theme="b" data-tap-toggle="false" class="header">'+'		<a href="#" data-rel="back" class="ui-btn-left ui-btn ui-btn-inline ui-mini ui-corner-all"><i class="fa fa-reply fa-lg"></i></a>'+"		<h1>HTWK App</h1>"+"	</div>"+'	<div role="main" class="ui-content">'+"		<h1>"+t.fullName+"</h1>"+'		<ul class="nativeDroidCards">'+"			<li>"+'				<p><img src="'+t.pictureData+'"/></p>'+"			</li>"+"			<li>"+"				<h1>Info</h1><hr>"+"				<strong>Abkürzung: </strong>"+t.id+"<br/>"+"				<strong>Adresse:</strong><br/>"+t.address+"<br/>"+"				<p><br/>"+i+"</p>"+"				<h5>"+"					<strong>Letzte Änderung:</strong>"+createDateTimeStamp(new Date(t.lastChange))+"				</h5>"+"			</li>"+'			<li id="building_'+e+'_map">'+'				<div class="map-canvas"></div><div class="mapcontainer"></div>'+'				<a class="external" href="http://maps.google.com/maps?daddr='+t.address+'"><i class="fa fa-crosshairs fa-lg"></i> Navigation</a>'+"			</li>"+"		</ul>"+"	</div>"+"</div>";o=$(o);$("body").append(o).trigger("create");o.on("pageshow",function(){var e=$(this);GMAPS.initGmap(e.attr("data-destination").split(","),e)}).on("pagehide",function(){$(this).remove()});$.mobile.initializePage();$.mobile.changePage("#building_"+e);loadingOut()}).fail(ajaxErrorHandler)}function capitalize(e){return e.charAt(0).toUpperCase()+e.slice(1)}function isEmpty(e){return e===""||e==={}||e===null||e===undefined||e instanceof Array&&e.length===0}function createServerDateStamp(e){if(isEmpty(e))e=new Date;var t=e.getDate();var n=e.getMonth()+1;var r=e.getFullYear();if(t<10)t="0"+t;if(n<10)n="0"+n;return r+""+n+""+t}function createDateStamp(e){if(isEmpty(e))e=new Date;var t=e.getDate();var n=e.getMonth()+1;var r=e.getFullYear();if(t<10)t="0"+t;if(n<10)n="0"+n;return GLOBAL.DATE.weekdays[e.getDay()].name+", "+t+"."+n+"."+r}function formatDate(e,t){return createServerDateStamp(e).replace(GLOBAL.DATE.formats.regexp,t)}function createDateTimeStamp(e){if(isEmpty(e))e=new Date;var t=e.getDate();var n=e.getMonth()+1;var r=e.getFullYear();var i=e.getHours();var s=e.getMinutes();var o=e.getSeconds();if(t<10)t="0"+t;if(n<10)n="0"+n;if(i<10)i="0"+i;if(s<10)s="0"+s;if(o<10)o="0"+o;return t+"."+n+"."+r+" "+i+":"+s+":"+o}function getWeek(e){var t=new Array(5);if(e.getDay()===0){e.setDate(e.getDate()+1)}else if(e.getDay()==6){e.setDate(e.getDate()+2)}e.setDate(e.getDate()-e.getDay()+1);t[0]=new Date(e);for(var n=1;n<5;n++){t[n]=new Date(e.setDate(e.getDate()+1))}return t}function getWeekDay(e){if(e.getDay()===0||e.getDay()==6){return GLOBAL.DATE.weekdays[1]}else{return GLOBAL.DATE.weekdays[e.getDay()]}}function escape(e){return e.replace(/&/g,"&").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function loadingIn(e,t){if(isEmpty(t)){t=false}if(isEmpty(e)){e="Daten werden abgerufen"}$.mobile.loading("show",{text:e,textVisible:true,textonly:t,disabled:true,theme:"a"})}function loadingOut(){$.mobile.loading("hide")}function openSignInDialog(e){$("#signInDialog_Btn_Save").off().on("click",{callback:e},function(e){saveUsernamePassword($("#signInDialogUsername").val(),$("#signInDialogPassword").val(),function(){if($.isFunction(e.data.callback))e.data.callback.call(this);$("#signInDialog").popup("close")})});$("#signInDialog").css("display","block").popup("open",{positionTo:"window",transition:"pop"})}function saveUsernamePassword(e,t,n,r){loadingIn("Ihre Einstellungen werden gespeichert...");CONFIG.AUTH.username=e;CONFIG.AUTH.checking=true;$.post(CONFIG.SERVER.base+CONFIG.SERVER.auth+"?username="+e+"&password="+t).done(function(e,t,i){CONFIG.AUTH.credentials=e.encryptedCredentials;CONFIG.AUTH.salt=e.salt;loadingOut();loadingIn("Es wird geprüft, ob ihre Daten korrekt sind...");$.getJSON(CONFIG.SERVER.base+CONFIG.SERVER.mailg+"?credentials="+CONFIG.AUTH.credentials+"&salt="+CONFIG.AUTH.salt+"&offset=1").done(function(e,t,i){loadingOut();if(!isEmpty(e.exception)){CONFIG.AUTH.username="";CONFIG.AUTH.credentials="";CONFIG.AUTH.salt="";CONFIG.AUTH.correct=false;CONFIG.AUTH.checking=false;loadingIn("Ihre Daten waren inkorrekt. Bitte versuchen Sie es erneut!",true)}else{CONFIG.AUTH.correct=true;CONFIG.AUTH.checking=false;localStorage.setItem("username",CONFIG.AUTH.username);localStorage.setItem("credentials",CONFIG.AUTH.credentials);localStorage.setItem("salt",CONFIG.AUTH.salt);loadingIn("Ihre Daten waren korrekt und wurden gespeichert!",true)}setTimeout(loadingOut,3e3);if($.isFunction(n)&&CONFIG.AUTH.correct)n.call(this);if($.isFunction(r)&&!CONFIG.AUTH.correct)r.call(this)})})}function openInExternalBrowser(e){window.open($(e.target).attr("href"),"_system","location=yes");e.preventDefault()}function loadParameters(){var e=localStorage.getItem("username");if(!isEmpty(e))CONFIG.AUTH.username=e;e=localStorage.getItem("credentials");if(!isEmpty(e))CONFIG.AUTH.credentials=e;e=localStorage.getItem("salt");if(!isEmpty(e))CONFIG.AUTH.salt=e;e=localStorage.getItem("language");if(!isEmpty(e))CONFIG.LANGUAGE.set=e;e=localStorage.getItem("defaultFeed");if(!isEmpty(e))CONFIG.NEWS.defaultFeed=e;e=localStorage.getItem("defaultCanteen");if(!isEmpty(e))CONFIG.MENSA.defaultCanteen=e;e=localStorage.getItem("timetable");if(!isEmpty(e))CONFIG.TIMETABLE=JSON.parse(e);delete loadParameters}function saveParameters(){localStorage.setItem("username",CONFIG.AUTH.username);localStorage.setItem("credentials",CONFIG.AUTH.credentials);localStorage.setItem("salt",CONFIG.AUTH.salt);localStorage.setItem("language",CONFIG.LANGUAGE.set);localStorage.setItem("defaultFeed",CONFIG.NEWS.defaultFeed);localStorage.setItem("defaultCanteen",CONFIG.MENSA.defaultCanteen);localStorage.setItem("timetable",JSON.stringify(CONFIG.TIMETABLE))}function ajaxErrorHandler(e,t,n,r){loadingOut();var i="Leider ist ein Fehler aufgetreten. Versuchen Sie es später erneut!";loadingIn(i,true);$("#menu").panel("open");setTimeout(loadingOut,4e3);if($.isFunction(r))r.call(this)}function loadStaffDetails(e){if(WURFL.is_mobile){analytics.trackView("staff#"+e)}loadingIn();$.getJSON(CONFIG.SERVER.base+CONFIG.SERVER.staff+e).done(function(t,n,r){if(!isEmpty(t.exception)){ajaxErrorHandler(t,n,r);return}var i=t.name.split(", ");var s='<div id="staff_'+e+'" data-role="page" data-theme="b" data-subpage="true" data-title="Mitarbeiter & Professoren" class="staffdetails">'+'	<div data-role="header" data-position="fixed" data-theme="b" data-tap-toggle="false" class="header">'+'		<a href="#" data-rel="back" class="ui-btn-left ui-btn ui-btn-inline ui-mini ui-corner-all"><i class="fa fa-reply fa-lg"></i></a>'+"		<h1>HTWK App</h1>"+"	</div>"+'	<div role="main" class="ui-content">'+"		<h1>"+t.degree+" "+i[1]+" "+i[0]+"</h1>"+'		<ul class="nativeDroidCards">'+"			<li>"+"				<!--<h2>Info</h2> BILD -->"+'				<img src="'+t.pictureData+'"/>'+"			</li>"+"			<li>"+"				<h1>Info</h1><hr/>"+"				<strong>Grad:</strong> "+t.degree+"<br/>"+"				<strong>Bereich:</strong> "+t.faculty+"<br/>"+"				<strong>Objekt:</strong> "+t.location+"<br/>"+"				<p>"+t.description+"</p>"+"			</li>"+"			<li>"+"				<h1>Kontakt</h1><hr/>"+'				<strong>E-Mail:</strong> <a href="mailto:'+t.email+'" class="ui-btn ui-btn-b ui-corner-all ui-mini ui-shadow">'+t.email+"</a><br/>"+'				<strong>Telefon:</strong> <a href="tel:'+t.telephone+'" class="ui-btn ui-btn-b ui-corner-all ui-mini ui-shadow">'+t.telephone+"</a><br/>"+"				<strong>Fax:</strong><br/><strong>"+t.telefax+"</strong>"+"			</li>"+"			<li>"+"				<h1>Links</h1><hr/>"+'				<a href="'+t.detailLink+'" class="ui-btn ui-btn-b ui-corner-all ui-mini ui-shadow external">Details zur Person</a>'+'				<a href="'+t.vcardLink+'" class="ui-btn ui-btn-b ui-corner-all ui-mini ui-shadow external">V-Card</a>'+"			</li>"+"		</ul>"+"	</div>"+"</div>";s=$(s).on("pagehide",function(){$(this).remove()});$("body").append(s).trigger("create");$.mobile.initializePage();$.mobile.changePage("#staff_"+e);loadingOut()}).fail(ajaxErrorHandler)}var CONFIG={SERVER:{base:"http://141.57.21.45:8080/",staff:"info/staff/",builds:"info/building",sport:"info/sport",academical:"info/academical/",news:"news",weather:"weather?location=",mensa:"mensa",timetable:"timetable/",auth:"auth",qis:"qis/get",room:"room/",mailg:"mailbox/get",mailn:"mailbox/new",mails:"mailbox/send",pushnotification:"auth/push"},LANGUAGE:{availableShort:["de_DE","en_EN"],availableLong:["Deutsch","English"],set:"de_DE"},AUTH:{username:"",password:"",credentials:"",salt:"",checking:false,correct:false},PUSH:{senderId:"1058861665734",enabled:false,regid:"",registered:false,STATUS:{1e3:"pushRequest",2e3:"newNews",4001:"newMail"}},GENERAL:{student:true,name:""},TIMETABLE:{semester:null,showDocentFullName:false,faculty:[],temporary:[]},NEWS:{defaultFeed:"rss.htwk.3"},MENSA:{defaultCanteen:118},AJAX:{scriptCharset:"utf-8",contentType:"application/json; charset=utf-8",headers:{Accept:"application/json; charset=utf-8","Content-Type":"application/json; charset=utf-8"}}};var GLOBAL={SCREEN:{height:0,width:0},INIT:{news:false,index:false,timetable:false,mensa:false,mail:false,qis:false,sport:false,staff:false,builds:false,wlan:false,info:false,room:false,settings:false},DATE:{formats:{regexp:/(\d{4})(\d{2})(\d{2})/,en:"$1-$2-$3",de:"$3.$2.$1"},weekdays:{0:{id:"Son",name:"Sonntag"},1:{id:"Mon",name:"Montag"},2:{id:"Tue",name:"Dienstag"},3:{id:"Wed",name:"Mittwoch"},4:{id:"Thu",name:"Donnerstag"},5:{id:"Fri",name:"Freitag"},6:{id:"Sat",name:"Samstag"}},currentWeek:null,currentPlanWeek:0},NEWS:{titles:{"rss.digiboard":"HTWK Digiboard","rss.eit.1":"EIT Kolloquien-Termine","rss.eit.2":"EIT Kolloquien-Nachrichten","rss.htwk.1":"HTWK Veranstaltungen","rss.htwk.2":"HTWK Stellenausschreibungen","rss.htwk.3":"HTWK Nachrichten","rss.imn.1":"IMN Nachrichten","rss.imn.2":"IMN Verteidigungen","rss.imn.3":"IMN Termine","rss.me.1":"ME Fachschaftsrat","rss.medien":"ME Nachrichten","rss.sport":"Sportportal","rss.stura":"HTWK Studentenrat","rss.wiwi":"WiWi Fachschaftsrats-Termine","rss.lvz.news":"LVZ Leipzig Nachrichten"}},MAIL:{filter:/(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/g}};var GMAPS={destination:[],mapcontainer:null,initGmap:function(e,t){GMAPS.destination=e;GMAPS.mapcontainer=t;navigator.geolocation.getCurrentPosition(GMAPS.onGeoGetSuccess,GMAPS.onGeoGetFail,{timeout:3e4,maximumAge:7e3,enableHighAccuracy:true})},onGeoGetFail:function(){GMAPS.mapcontainer.find(".map-canvas").parent().empty().append("<p>Eine Karte kann nicht angezeigt werden, da die Ortsbestimmung fehgeschlagen ist.</p>")},onGeoGetSuccess:function(e){GMAPS.calcRoute([parseFloat(e.coords.latitude),parseFloat(e.coords.longitude)])},calcRoute:function(e){var t=new google.maps.DirectionsService;var n={zoom:7,disableDefaultUI:true,draggable:false,keyboardShortcuts:false,scrollwheel:false,mapTypeId:google.maps.MapTypeId.WALKING};var r=new google.maps.Map(GMAPS.mapcontainer.find(".map-canvas")[0],n);var i=new google.maps.DirectionsRenderer({map:r});var s=new google.maps.LatLng(e[0],e[1]);var o=new google.maps.LatLng(GMAPS.destination[0],GMAPS.destination[1]);var u={origin:s,destination:o,travelMode:google.maps.TravelMode.WALKING};t.route(u,function(e,t){if(t==google.maps.DirectionsStatus.OK){i.setDirections(e)}})}};eval(function(e,t,n,r,i,s){i=function(e){return e};if(!"".replace(/^/,String)){while(n--){s[n]=r[n]||n}r=[function(e){return s[e]}];i=function(){return"\\w+"};n=1}while(n--){if(r[n]){e=e.replace(new RegExp("\\b"+i(n)+"\\b","g"),r[n])}}return e}('3 2={"1":0,"4":"5 8 7","6":"9"};',10,10,"false|is_mobile|WURFL|var|complete_device_name|generic|form_factor|browser|web|Desktop".split("|"),0,{}));var PushNotification=function(){};PushNotification.prototype.register=function(e,t,n){if(t==null){t=function(){}}if(typeof t!="function"){console.log("PushNotification.register failure: failure parameter not a function");return}if(typeof e!="function"){console.log("PushNotification.register failure: success callback parameter must be a function");return}cordova.exec(e,t,"PushPlugin","register",[n])};PushNotification.prototype.unregister=function(e,t){if(t==null){t=function(){}}if(typeof t!="function"){console.log("PushNotification.unregister failure: failure parameter not a function");return}if(typeof e!="function"){console.log("PushNotification.unregister failure: success callback parameter must be a function");return}cordova.exec(e,t,"PushPlugin","unregister",[])};PushNotification.prototype.setApplicationIconBadgeNumber=function(e,t){if(errorCallback==null){errorCallback=function(){}}if(typeof errorCallback!="function"){console.log("PushNotification.setApplicationIconBadgeNumber failure: failure parameter not a function");return}if(typeof e!="function"){console.log("PushNotification.setApplicationIconBadgeNumber failure: success callback parameter must be a function");return}cordova.exec(e,e,"PushPlugin","setApplicationIconBadgeNumber",[{badge:t}])};if(!window.plugins){window.plugins={}}if(!window.plugins.pushNotification){window.plugins.pushNotification=new PushNotification}
