function capitalize(e){return e.charAt(0).toUpperCase()+e.slice(1)}function isEmpty(e){return""===e||e==={}||null===e||void 0===e||e instanceof Array&&0===e.length}function createServerDateStamp(e){isEmpty(e)&&(e=new Date);var a=e.getDate(),t=e.getMonth()+1,n=e.getFullYear();return 10>a&&(a="0"+a),10>t&&(t="0"+t),n+""+t+a}function createDateStamp(e){isEmpty(e)&&(e=new Date);var a=e.getDate(),t=e.getMonth()+1,n=e.getFullYear();return 10>a&&(a="0"+a),10>t&&(t="0"+t),GLOBAL.DATE.weekdays[e.getDay()].name+", "+a+"."+t+"."+n}function formatDate(e,a){return createServerDateStamp(e).replace(GLOBAL.DATE.formats.regexp,a)}function createDateTimeStamp(e){isEmpty(e)&&(e=new Date);var a=e.getDate(),t=e.getMonth()+1,n=e.getFullYear(),i=e.getHours(),r=e.getMinutes(),s=e.getSeconds();return 10>a&&(a="0"+a),10>t&&(t="0"+t),10>i&&(i="0"+i),10>r&&(r="0"+r),10>s&&(s="0"+s),a+"."+t+"."+n+" "+i+":"+r+":"+s}function getWeek(e){var a=new Array(5);0===e.getDay()?e.setDate(e.getDate()+1):6==e.getDay()&&e.setDate(e.getDate()+2),e.setDate(e.getDate()-e.getDay()+1),a[0]=new Date(e);for(var t=1;5>t;t++)a[t]=new Date(e.setDate(e.getDate()+1));return a}function getWeekDay(e){return 0===e.getDay()||6==e.getDay()?GLOBAL.DATE.weekdays[1]:GLOBAL.DATE.weekdays[e.getDay()]}function escape(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function loadingIn(e,a){isEmpty(a)&&(a=!1),isEmpty(e)&&(e="Daten werden abgerufen"),$.mobile.loading("show",{text:e,textVisible:!0,textonly:a,disabled:!0,theme:"a"})}function loadingOut(){$.mobile.loading("hide")}function openSignInDialog(e){$("#signInDialog_form").off().submit(function(a){a.preventDefault(),saveUsernamePassword($("#signInDialog_username").val(),$("#signInDialog_password").val(),function(){$("#signInDialog").popup("close"),$.isFunction(e)&&e.call(this)})}),$("#signInDialog").css("display","block").popup("open",{positionTo:"window",transition:"pop"})}function saveUsernamePassword(e,a,t,n){loadingIn("Ihre Einstellungen werden gespeichert..."),CONFIG.AUTH.username=e,CONFIG.AUTH.checking=!0,$.post(CONFIG.SERVER.base+CONFIG.SERVER.auth+"?username="+e+"&password="+a).done(function(e,a,i){CONFIG.AUTH.credentials=e.encryptedCredentials,CONFIG.AUTH.salt=e.salt,loadingOut(),loadingIn("Es wird geprüft, ob ihre Daten korrekt sind..."),$.getJSON(CONFIG.SERVER.base+CONFIG.SERVER.mailg+"?credentials="+CONFIG.AUTH.credentials+"&salt="+CONFIG.AUTH.salt+"&offset=1").done(function(e,a,i){loadingOut(),isEmpty(e.exception)?(CONFIG.AUTH.correct=!0,CONFIG.AUTH.checking=!1,saveParameters(),loadingIn("Ihre Daten waren korrekt und wurden gespeichert!",!0)):(CONFIG.AUTH.username="",CONFIG.AUTH.credentials="",CONFIG.AUTH.salt="",CONFIG.AUTH.correct=!1,CONFIG.AUTH.checking=!1,loadingIn("Ihre Daten waren inkorrekt. Bitte versuchen Sie es erneut!",!0)),setTimeout(loadingOut,3e3),$.isFunction(t)&&CONFIG.AUTH.correct&&t.call(this),$.isFunction(n)&&!CONFIG.AUTH.correct&&n.call(this)})})}function openInExternalBrowser(e){window.open($(e.target).attr("href"),"_system","location=yes"),e.preventDefault()}function loadParameters(){var e=localStorage.getItem("username");isEmpty(e)||(CONFIG.AUTH.username=e),e=localStorage.getItem("credentials"),isEmpty(e)||(CONFIG.AUTH.credentials=e),e=localStorage.getItem("salt"),isEmpty(e)||(CONFIG.AUTH.salt=e),e=localStorage.getItem("email"),isEmpty(e)||(CONFIG.AUTH.email=e),e=localStorage.getItem("language"),isEmpty(e)||(CONFIG.LANGUAGE.set=e),e=localStorage.getItem("defaultFeed"),isEmpty(e)||(CONFIG.NEWS.defaultFeed=e),e=localStorage.getItem("defaultCanteen"),isEmpty(e)||(CONFIG.MENSA.defaultCanteen=e),e=localStorage.getItem("timetable"),isEmpty(e)||(CONFIG.TIMETABLE.faculty=JSON.parse(e).faculty)}function saveParameters(){localStorage.setItem("username",CONFIG.AUTH.username),localStorage.setItem("credentials",CONFIG.AUTH.credentials),localStorage.setItem("salt",CONFIG.AUTH.salt),localStorage.setItem("email",CONFIG.AUTH.email),localStorage.setItem("language",CONFIG.LANGUAGE.set),localStorage.setItem("defaultFeed",CONFIG.NEWS.defaultFeed),localStorage.setItem("defaultCanteen",CONFIG.MENSA.defaultCanteen),localStorage.setItem("timetable",JSON.stringify(CONFIG.TIMETABLE))}function ajaxErrorHandler(e,a,t,n){loadingOut();var i="Leider ist ein Fehler aufgetreten. Versuchen Sie es später erneut!";loadingIn(i,!0),setTimeout(loadingOut,4e3),setTimeout(function(){$("#panelMenu").panel("open")},4500),$.isFunction(n)&&n.call(this)}function defaultErrorHandling(e,a,t){return isEmpty(e.exception)?void 0:void ajaxErrorHandler(e,a,t)}function buildingLoadBuildingDetails(e){loadingIn(),$.getJSON(CONFIG.SERVER.base+CONFIG.SERVER.builds+"/"+e).done(function(a,t,n){var i=isEmpty(a.description[0])?"":a.description[0]+"</br>",r='<div id="building_'+e+'" data-role="page" data-theme="b" data-subpage="true" data-title="Gebäude" data-destination="'+a.latLng.replace(/ /,"")+'">	<div data-role="header" data-position="fixed" data-theme="b" data-tap-toggle="false" class="header">		<a href="#" data-rel="back" class="ui-btn-left ui-btn ui-btn-inline ui-mini ui-corner-all"><i class="fa fa-reply fa-lg"></i></a>		<h1>HTWK App</h1>	</div>	<div role="main" class="ui-content">		<h1>'+a.fullName+'</h1>		<ul class="nativeDroidCards">			<li>				<p><img src="'+a.pictureData+'"/></p>			</li>			<li>				<h1>Info</h1><hr>				<strong>Abkürzung: </strong>'+a.id+"<br/>				<strong>Adresse:</strong><br/>"+a.address+"<br/>				<p><br/>"+i+"</p>				<h5>					<strong>Letzte Änderung:</strong>"+createDateTimeStamp(new Date(a.lastChange))+'				</h5>			</li>			<li id="building_'+e+'_map">				<div class="map-canvas"></div><div class="mapcontainer"></div>				<a class="external ui-btn ui-btn-b" href="http://maps.google.com/maps?daddr='+a.address+'"><i class="fa fa-crosshairs fa-lg"></i> Navigation</a>			</li>		</ul>	</div></div>';r=$(r),$("body").append(r).trigger("create"),r.on("pageshow",function(){var e=$(this);GMAPS.initGmap(e.attr("data-destination").split(","),e)}).on("pagehide",function(){$(this).remove()}),$.mobile.initializePage(),$.mobile.changePage("#building_"+e),loadingOut()}).fail(ajaxErrorHandler)}function loadStaffDetails(e){loadingIn(),$.getJSON(CONFIG.SERVER.base+CONFIG.SERVER.staff+e).done(function(a,t,n){defaultErrorHandling(a,t,n);var i=a.name.split(", "),r='<div id="staff_'+e+'" data-role="page" data-theme="b" data-subpage="true" data-title="Mitarbeiter & Professoren" class="staffdetails">	<div data-role="header" data-position="fixed" data-theme="b" data-tap-toggle="false" class="header">		<a href="#" data-rel="back" class="ui-btn-left ui-btn ui-btn-inline ui-mini ui-corner-all"><i class="fa fa-reply fa-lg"></i></a>		<h1>HTWK App</h1>	</div>	<div role="main" class="ui-content">		<h1>'+a.degree+" "+i[1]+" "+i[0]+'</h1>		<ul class="nativeDroidCards">			<li>				<!--<h2>Info</h2> BILD -->				<img src="'+a.pictureData+'"/>			</li>			<li>				<h1>Info</h1><hr/>				<strong>Grad:</strong> '+a.degree+"<br/>				<strong>Bereich:</strong> "+a.faculty+"<br/>				<strong>Objekt:</strong> "+a.location+"<br/>				<p>"+a.description+'</p>			</li>			<li>				<h1>Kontakt</h1><hr/>				<strong>E-Mail:</strong> <a href="mailto:'+a.email+'" class="ui-btn ui-btn-b ui-corner-all ui-mini ui-shadow"><i class="fa fa-envelope fa-fw fa-lg"></i> '+a.email+'</a><br/>				<strong>Telefon:</strong> <a href="tel:'+a.telephone+'" class="ui-btn ui-btn-b ui-corner-all ui-mini ui-shadow"><i class="fa fa-mobile fa-fw fa-lg"></i> '+a.telephone+'</a><br/>				<strong>Fax:</strong><br/><strong><i class="fa fa-fax fa-fw fa-lg"></i> '+a.telefax+'</strong>			</li>			<li>				<h1>Links</h1><hr/>				<a href="'+a.detailLink+'" class="ui-btn ui-btn-b ui-corner-all ui-mini ui-shadow external"><i class="fa fa-user fa-fw fa-lg"></i> Details zur Person</a>				<a href="'+a.vcardLink+'" class="ui-btn ui-btn-b ui-corner-all ui-mini ui-shadow external"><i class="fa fa-ticket fa-fw fa-lg"></i> V-Card</a>			</li>		</ul>	</div></div>';r=$(r).on("pagehide",function(){$(this).remove()}),$("body").append(r).trigger("create"),$.mobile.initializePage(),$.mobile.changePage("#staff_"+e),loadingOut()}).fail(ajaxErrorHandler)}eval(function(e,a,t,n,i,r){if(i=function(e){return e},!"".replace(/^/,String)){for(;t--;)r[t]=n[t]||t;n=[function(e){return r[e]}],i=function(){return"\\w+"},t=1}for(;t--;)n[t]&&(e=e.replace(new RegExp("\\b"+i(t)+"\\b","g"),n[t]));return e}('8 7={"6":5,"4":"3 2","1":"0"};',9,9,"Desktop|form_factor|Chrome|Google|complete_device_name|false|is_mobile|WURFL|var".split("|"),0,{}));var CONFIG={SERVER:{base:"https://htwk-app.imn.htwk-leipzig.de/",staff:"info/staff/",builds:"info/building",sport:"info/sport",academical:"info/academical/",news:"news",weather:"weather?location=",mensa:"mensa",timetable:"timetable/",auth:"auth",qis:"qis/get",room:"room/",mailg:"mailbox/get",mailn:"mailbox/new",mails:"mailbox/send",pushnotification:"auth/push"},LANGUAGE:{availableShort:["de_DE","en_EN"],availableLong:["Deutsch","English"],set:"de_DE"},AUTH:{username:"",password:"",credentials:"",salt:"",email:"",checking:!1,correct:!1},PUSH:{senderId:"1058861665734",enabled:!1,regid:"",registered:!1,STATUS:{1e3:"pushRequest",2e3:"newNews",4001:"newMail"}},GENERAL:{student:!0,name:""},TIMETABLE:{semester:null,showDocentFullName:!1,faculty:[],temporary:[]},NEWS:{defaultFeed:"rss.htwk.3"},MENSA:{defaultCanteen:118},AJAX:{scriptCharset:"utf-8",contentType:"application/json; charset=utf-8",headers:{Accept:"application/json; charset=utf-8","Content-Type":"application/json; charset=utf-8"}}},GLOBAL={SCREEN:{height:0,width:0},INIT:{news:!1,index:!1,timetable:!1,mensa:!1,mail:!1,qis:!1,sport:!1,staff:!1,builds:!1,wlan:!1,info:!1,room:!1,settings:!1},DATE:{formats:{regexp:/(\d{4})(\d{2})(\d{2})/,en:"$1-$2-$3",de:"$3.$2.$1"},weekdays:{0:{id:"Son",name:"Sonntag"},1:{id:"Mon",name:"Montag"},2:{id:"Tue",name:"Dienstag"},3:{id:"Wed",name:"Mittwoch"},4:{id:"Thu",name:"Donnerstag"},5:{id:"Fri",name:"Freitag"},6:{id:"Sat",name:"Samstag"}},currentWeek:null,currentPlanWeek:0},NEWS:{titles:{"rss.digiboard":"HTWK Digiboard","rss.eit.1":"EIT Kolloquien-Termine","rss.eit.2":"EIT Kolloquien-Nachrichten","rss.htwk.1":"HTWK Veranstaltungen","rss.htwk.2":"HTWK Stellenausschreibungen","rss.htwk.3":"HTWK Nachrichten","rss.imn.1":"IMN Nachrichten","rss.imn.2":"IMN Verteidigungen","rss.imn.3":"IMN Termine","rss.me.1":"ME Fachschaftsrat","rss.medien":"ME Nachrichten","rss.sport":"Sportportal","rss.stura":"HTWK Studentenrat","rss.wiwi":"WiWi Fachschaftsrats-Termine","rss.lvz.news":"LVZ Leipzig Nachrichten"}},MAIL:{filter:/(?:[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/g}},GMAPS={destination:[],mapcontainer:null,initGmap:function(e,a){GMAPS.destination=e,GMAPS.mapcontainer=a;var t={timeout:3e4,maximumAge:7e3,enableHighAccuracy:!0};navigator.geolocation?navigator.geolocation.getCurrentPosition(GMAPS.onGeoGetSuccess,GMAPS.onGeoGetFail,t):GMAPS.onGeoGetFail()},onGeoGetFail:function(e){var a=new google.maps.LatLng(GMAPS.destination[0],GMAPS.destination[1]),t={disableDefaultUI:!0,draggable:!1,keyboardShortcuts:!1,scrollwheel:!1,center:a,zoom:16},n=new google.maps.Map(GMAPS.mapcontainer.find(".map-canvas")[0],t);new google.maps.Marker({position:a,map:n})},onGeoGetSuccess:function(e){GMAPS.calcRoute([parseFloat(e.coords.latitude),parseFloat(e.coords.longitude)])},calcRoute:function(e){var a=new google.maps.DirectionsService,t={zoom:7,disableDefaultUI:!0,draggable:!1,keyboardShortcuts:!1,scrollwheel:!1,mapTypeId:google.maps.MapTypeId.WALKING},n=new google.maps.Map(GMAPS.mapcontainer.find(".map-canvas")[0],t),i=new google.maps.DirectionsRenderer({map:n}),r=new google.maps.LatLng(e[0],e[1]),s=new google.maps.LatLng(GMAPS.destination[0],GMAPS.destination[1]),o={origin:r,destination:s,travelMode:google.maps.TravelMode.WALKING};a.route(o,function(e,a){a==google.maps.DirectionsStatus.OK&&i.setDirections(e)})}};