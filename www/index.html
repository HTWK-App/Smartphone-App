<!DOCTYPE html>
<html>
	<head>
        <title>HTWK App</title>
		<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
        <link rel="stylesheet" href="css/font-awesome.min.css" />
        <link rel="stylesheet" href="css/jquerymobile-1.4.2.css" />
        <link rel="stylesheet" href="css/design-1.4.2.css" />
        <link rel="stylesheet" href="css/design.htwk-1.4.2.css"  id='jQMnDTheme' />
        <link rel="stylesheet" href="css/design.color.htwk.css" id='jQMnDColor' />
		<script type="application/javascript" src="js/fastclick.js"></script>
		<script type="application/javascript" src="js/jquery-2.1.0.js"></script>
        <script type="application/javascript" src="js/jquery.mobile-1.4.2.min.js"></script>
		<!-- <script type="application/javascript" src="js/design.js"></script> -->
		<script type="application/javascript" src="js/config.js"></script>
		<script type="application/javascript" src="js/fn.js"></script>
		<script type="text/javascript" src="https://maps.google.com/maps/api/js?v=3.exp&sensor=true"> </script>
		<!-- <script type="application/javascript" src="cordova.js"></script> -->
		<script type="text/javascript">
		
			var fromLat;
			var fromLng;
			var toLat;
			var toLng;
			var mapcontainer;
			var map;

			var directionsDisplay;
			var directionsService;

			function onGeoGetSuccess (p){
				//alert("geosuccess");
				fromLat = parseFloat(p.coords.latitude);
				fromLng = parseFloat(p.coords.longitude);
				calcRoute();
				
			}
			function onGeoGetFail(e){
				//alert("fail");
			}
			function calcRoute() {
				alert("calcRoute");
				start = new google.maps.LatLng(fromLat, fromLng);
				end = new google.maps.LatLng(toLat, toLng);
				var request = {
					origin: "Leipzig Hauptbahnhof",
					destination:"Karl-Liebknecht-Str 70",
					travelMode: google.maps.TravelMode.WALKING
				};
				directionsService.route(request, function(response, status) {
					if (status == google.maps.DirectionsStatus.OK) {
					  directionsDisplay.setDirections(response);
					}
				});
			}
			function initGmap(){
				alert("initGmap");
				navigator.geolocation.getCurrentPosition(onGeoGetSuccess, onGeoGetFail,{timeout:30000});
				//alert("end init");
				directionsService = new google.maps.DirectionsService();

				var leipzig = new google.maps.LatLng(51.344267, 12.380071);
				var mapOptions = {
					zoom: 7,
					//disableDefaultUI : true,
					//draggable : false,
					//keyboardShortcuts : false,
					//scrollwheel : false,
					center: leipzig
					//mapTypeId: google.maps.MapTypeId.WALKING
				}
				
				mapcontainer.find(".map-canvas").first().append("<span>test</span>");
				
				map = new google.maps.Map(mapcontainer.find(".map-canvas").first(), mapOptions);
				var rendererOptions = {
					map: map
				}
				directionsDisplay = new google.maps.DirectionsRenderer(rendererOptions)
				
				//directionsDisplay.setMap(map);
				//directionsDisplay.setPanel(t.find(".mapcontainer").get(0));
				
			}
		</script>
	</head>
	<body>
		<div data-role="page" data-theme='b'>
			<div data-role="panel" id="menue_index" data-theme="a" data-display="push">
				<ul id="testulid" data-role="listview">
					<li data-role="list-divider" role="heading">Hauptmenü</li>
					<li data-icon="fire"><a href="index.html" >Startseite</a></li>
					<li data-icon="fire"><a href="news.html" >News</a></li>
					<li data-icon="trophy"><a href="stundenplan.html" >Stundenplan</a></li>
					<li data-icon="trophy"><a href="mensa.html" >Mensa</a></li>
					<li data-icon="trophy"><a href="postfach.html" >Postfach</a></li>
					<li data-icon="trophy"><a href="qis.html" >QIS</a></li>
					<li data-icon="trophy"><a href="sport.html" >Hochschulsport</a></li>
					
				</ul>
				<!--<div data-role="collapsible"><h4>Info-Center</h4> -->
				<ul data-role="listview">
					<li data-role="list-divider" role="heading">Info-Center</li>
					<li data-icon="trophy"><a href="info_allgemein.html" >Allgemein</a></li>
					<li data-icon="trophy"><a href="info_mitarbeiter.html" >Mitarbeiter</a></li>
					<li data-icon="trophy"><a href="info_gebaeudeplan.html" >Gebäudeplan</a></li>
					<li data-icon="trophy"><a href="info_wlan.html" >WLAN-Konfiguration</a></li>
				</ul>
				<!--</div> -->
				<ul data-role="listview">
					<li data-role="list-divider" role="heading">Tools</li>
					<li data-icon="trophy"><a href="tools_leeren-raum.html" >Leeren Raum finden</a></li>
					<li data-icon="trophy"><a href="tools_buch.html" >Buchausleihe</a></li>
				</ul>
				<ul data-role="listview">
					<li data-role="list-divider" role="heading">Einstellungen</li>
					<li data-icon="trophy"><a href="einstellungen_htwk-app.html" >HTWK-App</a></li>
				</ul>
			</div>
			<div data-role="header" data-position="fixed" data-theme='b'>
				<a href="#menue_index" data-role="button" data-iconpos='left' ><i class="icon-ellipsis-vertical"></i>&nbsp;</a>
				<h1>&nbsp;HTWK App</h1>
			</div>
			<div data-role="content">   
				<div class='inset cardAnimated'>
					<h1>Willkommen ...</h1>
					<ul data-nativedroid-plugin='cards' class="nativeDroidCards">
						<li data-cards-type='weather'>
							<h1>Leipzig</h1>
							<h2>Deutschland</h2>
							<ul class='detail'>
								<li><i class='icon-circle sunny'></i>
									<span>Sonnig</span>
									<span><i class='icon-fire'></i> 12km/h</span>
								</li>
								<li>28&deg;</li>
							</ul>
							<ul class='week'>
								<li>
									<span>Mo</span>
									<i class='icon-cloud'></i>
									<strong>24&deg;</strong>
									<span>11&deg;</span>
								</li>
								<li>
									<span>Die</span>
									<i class='icon-cloud'></i>
									<strong>20&deg;</strong>
									<span>10&deg;</span>
								</li>
								<li>
									<span>Mi</span>
									<i class='icon-cloud'></i>
									<strong>11&deg;</strong>
									<span>3&deg;</span>
								</li>
								<li>
									<span>Do</span>
									<i class='icon-cloud'></i>
									<strong>4&deg;</strong>
									<span>0&deg;</span>
								</li>
							</ul>
						</li>
						<li data-cards-type='text'>
							<h1>Neuste HTWK-Nachricht</h1>
							<h2>19.03.14, Herzlich Willkommen!</h2>
							<p>Gemeinsam haben die Mitarbeiter des Akademischen Auslandsamtes und des Hochschulsprachenzentrums am Dienstag die neuen Teilstudenten von unseren internationalen Partnerhochschulen (Incomings) begrüßt. Im Sommersemester 2014 beginnen 20 Studierende aus Frankreich, Italien, Jordanien, Russland, der Türkei und Ungarn ihr Teilstudium an der HTWK Leipzig.</p>
							<p><a href="news.html">Weiterlesen </a></p>
						</li>
						<li data-cards-type='text'>
							<h1>Kommende Veranstaltungen</h1>
							<br/>
							<h2>AUSSTELLUNG "AUFGERISSEN"</h2>
							<h3>18.02.2014 - 11.04.2014</h3>
							<p> Auch in diesem Jahr lädt die Fakultät Medien zu der Ausstellung „AUFGERISSEN VI“ ins Foyer der Hochschulbibliothek ein, um Entwürfe von Studier...</p>
							<p><a href="#" >mehr </a></p>
							<br/> 
							<h2>TREFFEN LEAN HOCHSCHULGRUPPE (2/14)</h2>
							<h3>28.03.2014</h3>
							<p> Wir laden euch ganz herzlich zu unserem zweiten Treffen in diesem Jahr am 28.03.2014 um 12.00 Uhr ein! Willkommen sind natürlich wieder alle interess...</p>
							<p><a href="#" >mehr </a></p>
						</li>
						<li data-cards-type='text'>
							<h1>Leipzig News LVZ</h1>
							<h2>19.03.14, Blab bla bla</h2>
							<p>Eisenbahnstraße,... bla,... tod.. schmerz... bla</p>
							<p><a href="#" >Weiterlesen </a></p>
						</li>
					</ul>
				</div>
			</div>
		</div>
		
		<!---------------------------------------------------------------------------------------------------->
		<script>
		// AJAX Setup
		$.ajaxSetup(CONFIG.AJAX);
		
		// GENERAL Setup
		$( document )
			.ready(function() {
				$.mobile.defaultPageTransition   = "none";
				$.mobile.defaultDialogTransition = "none";
				$.mobile.buttonMarkup.hoverDelay = 0;
				$.mobile.changePage.defaults.allowSamePageTransition = true;
				// Add EventListener for Fastclick Framework//
				window.addEventListener("load", function() {
					FastClick.attach(document.body);
				}, false);
				//$("header, footer").toolbar();
				
				loadParameters();
				
				
				///// FIXME ISSUE FOR EVERY MENUE
				if(!CONFIG.GENERAL.student)
				{
					$("#menuItem_QIS").hide();
				}
			})
			
			/*.on("panelbeforeopen", function( event, ui ) {
				$(".toblur").addClass("blur");
			})
			.on("panelbeforeclose", function( event, ui ) {
				$(".toblur").removeClass("blur");
			})
			*/
			
			// Header Update on Page Switch
			.on("pageshow", "div:jqmData(role='page')", function() {
				var o = $(this);
    			var title = o.jqmData("title");
    			var subpage = !isEmpty(o.jqmData("subpage"));
    			//var h = $("#header");
    			var h = $(".ui-page-active div[data-role='header']");
    			
    			h.find("h1").text(title);
    			if(subpage) {
    				h.find("#btn_back").css("display", "block").end()
    				 .find("#btn_menu").css("display", "none");
    			} else {
    				h.find("#btn_menu").css("display", "block").end()
    				 .find("#btn_back").css("display", "none");
    			}
			})
			// External Link Handling
			.on("click", "a.external", openInExternalBrowser);

		// SignIn Dialog
		$( "#signInDialog_Btn_Abort" )
			.on("click", function () {
				$( "#signInDialog" ).popup("close");
			});
	</script>
	</body>
</html>
